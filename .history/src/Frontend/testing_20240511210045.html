<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" type="x-icon" href="/Images/brgylogo.png">
        <title>BRGY-409</title>
        <link href="output.css" rel="stylesheet" >
        <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    
    </head>
<body>
    
<!-- component -->





<ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow-2xl bg-base-100 rounded-box w-52 ">
    <li class="open-modal-btn" data-request-id="' . $row["NewsID"] . '"><a><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
    <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z" />
    <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
  </svg> 
   View Details</a></li>
  
   <li class="edit-news-btn"  data-News-id="' . $row["NewsID"] . '"  data-News-Tittle="' . $row["NewsTittle"] . '"  data-News-Content="' . $row["NewsContent"] . '"  data-News-Time="' . $row["Newstime"] . '"  data-News-Date="' . $row["NewsDate"] . '" data-News-Images="' . $row["NewsImages"] . '">
   <a><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
   <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10" />
 </svg>
  Edit Residents</a></li>


   <li class="delete-news-btn"  data-request-id="' . $row["NewsID"]  . '"><a><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
    <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" />
   </svg>Delete News</a></li>

</ul>






// Edit News Modal
                                    echo '<dialog id="EditNewsDetails" class="modal p-3 ">
                                    <div class="modal-box w-100 max-w-4xl rounded-lg">
                                     
                                        <div class="mb-2 lg:mb-0">
                                          <h3 class="text-2xl font-bold text-blue-500 text-center">BRGY-409 Document Request Management System</h3>
                                          <span class="flex text-base font-medium text-blue-500 justify-center text-center">Edit News Details</span>
                                        </div>
                                      
                                        <form id="EditNewsForm" action="../Backend/EditNews.php" method="post" enctype="multipart/form-data">
                            
                                      <div id="Edit-News-Content"></div>
                                      </form>
                            
                                      <div class="mt-4 px-4 py-3 sm:px-6 flex align-items justify-center p-4 gap-4 flex-row">
                                      <button id="Close-Edit-Button" class="btn btn-sm btn-circle btn-ghost absolute top-2 right-2">
                                      âœ•
                                    </button>
                                    <div class="px-4 py-3 sm:px-6 flex align-items justify-center p-4 gap-4 flex-row">
                                    
                                    <button" id="Edit-News-Button" class="inline-flex justify-center  rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-500 hover:bg-green-600 text-base font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 sm:w-auto sm:text-sm"> 
                                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 mr-1">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                                      </svg>
                                      Save News Details
                                    </button>
                                     </div>
                                      </div>
                                    </div>
                                  </dialog>';


                     //script for residents info
                     echo '<script>
                     document.addEventListener("DOMContentLoaded", function () {
                     const modal = document.getElementById("EditNewsDetails");
                     const modalContent = document.getElementById("Edit-News-Content");
                     const openModalButtons = document.querySelectorAll(".edit-news-btn");
                     const closeModalButton = document.getElementById("Close-Edit-Button");

                     openModalButtons.forEach(function (button) {
                        button.addEventListener("click", function () {
                           const ID = button.getAttribute("data-News-id");
                           const Title = button.getAttribute("data-News-Tittle");
                           const Content = button.getAttribute("data-News-Content");
                           const Time = button.getAttribute("data-News-Time");
                           const Date = button.getAttribute("data-News-Date");
                           const Image = button.getAttribute("data-News-Images");
                           
                           // Display default text in modal content
                                 modalContent.innerHTML = `
                              
                                 <div class="flex flex-col items-center mt-3">


                                 <div class="relative">
                                 <input  type="file" id="NewsImage" name="NewsImage" class="hidden" accept=".jpg, .png .jpeg .pdf, .doc, .docx">
                                 <img id="profilePicture" src="${Image ? "../Backend/uploads/NewsImages" + Image : "/Images/blank.png"}" class="w-32 h-32 bg-gray-300 rounded-full mb-2 border-4" alt="Profile Picture">
                                 <label for="NewsImage" class="absolute bottom-0 right-0 p-2 bg-gray-100 text-black rounded-full hover:bg-gray-400 focus:outline-none focus:bg-gray-400 cursor-pointer border-4 " title="Edit Profile">
                                 <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-6 h-6">
                                 <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10" />
                                 </svg>
                              </label>
                                 </div>

                     
                        <div class="flex flex-col">
                           <label for="NewsEditTitle" class="block text-sm font-medium text-gray-700">News Title/label>
                           <input value="${NewsTittle}" type="text" name="NewsEditTitle" id="NewsEditTitle" autocomplete="given-name" placeholder="First Name"
                                 class="block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 ">
                        </div>

                        <div class="flex flex-col">
                           <label for="NewsEditContent" class="block text-sm font-medium text-gray-700">News Content</label>
                           <input value="${NewsContent}"  type="text" name="NewsEditContent" id="NewsEditContent" autocomplete="additional-name" placeholder="Middle Name"
                                 class="block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 ">
                        </div>

                        <div class="flex flex-col">
                           <label for="NewsEditTime" class="block text-sm font-medium text-gray-700">News Time</label>
                           <input value="${Newstime}"   type="text" name="NewsEditTime" id="NewsEditTime" autocomplete="family-name" placeholder="Last Name"
                                 class="block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 ">
                        </div>
                  
                        <div class="flex flex-col">
                           <label for="NewsEditDate" class="block text-sm font-medium text-gray-700">News Date</label>
                           <input value="${NewsDate}" type="text" name="NewsEditDate" id="NewsEditDate" autocomplete="given-name" 
                                 class="block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 ">
                        </div>

               </div>
                     `;

                     // Display modal
                     modal.showModal();
                  });
               });

               // Close modal when clicking on the close button
               closeModalButton.addEventListener("click", function () {
                  modal.close();
               });
               });
               </script>';

               echo '<script>
                  $(function() {
                     $("#Edit-News-Button").click(function(e) {
                           e.preventDefault();

                           var valid = $("#EditNewsForm")[0].checkValidity();

                           if (valid) {
                              var formData = new FormData($("#EditNewsForm")[0]);

                              $.ajax({
                                 type: "POST",
                                 url: "../Backend/EditNews.php",
                                 data: formData,
                                 processData: false,
                                 contentType: false,
                                 success: function(data) {
                                       Swal.fire({
                                          icon: "success",
                                          title: "Success",
                                          text: data,
                                       }).then(function() {
                                          // Show personal profile
                                          window.location.reload(); // Reload the page
                                       });
                                 },
                                 error: function(data) {
                                       Swal.fire({
                                          icon: "error",
                                          title: "Error",
                                          text: "There were errors while saving the data.",
                                       });
                                 },
                              });
                           } else {
                              // Handle invalid form data here
                           }
                     });
                  });
                  document.getElementById("Edit-News-Button").addEventListener("click", function() {
                     var dialog = document.getElementById("EditNewsDetails");
                     dialog.close();
                  });
               </script>';















<script src="dashboard.js"></script>
</body>
</html>